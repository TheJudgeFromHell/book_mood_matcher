<!-- templates/books/index.html -->
{% extends 'books/base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - BookMood{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="jumbotron bg-light p-5 rounded">
            <h1 class="display-4">üìñ –ù–∞–π–¥–∏ —Å–≤–æ—é –∏–¥–µ–∞–ª—å–Ω—É—é –∫–Ω–∏–≥—É!</h1>
            <p class="lead">–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –Ω–∞–º –æ —Å–≤–æ–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏, –∏ –º—ã –ø–æ–¥–±–µ—Ä–µ–º –∫–Ω–∏–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –≤–∞–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.</p>
            <hr class="my-4">
            <p>–ù–∞—à –∞–ª–≥–æ—Ä–∏—Ç–º —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤–∞—à–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —É—Ä–æ–≤–µ–Ω—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è.</p>
            <a class="btn btn-primary btn-lg" href="{% url 'book_selection' %}" role="button">–ü–æ–¥–æ–±—Ä–∞—Ç—å –∫–Ω–∏–≥—É</a>
        </div>

        <div class="row mt-5">
            <div class="col-md-4 mb-4">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <h2>{{ books_count }}</h2>
                        <p class="card-text">–∫–Ω–∏–≥ –≤ –Ω–∞—à–µ–π –±–∞–∑–µ</p>
                    </div>
                </div>
            </div>
            {% if user_stats %}
            <div class="col-md-4 mb-4">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <h2>{{ user_stats.selections_count }}</h2>
                        <p class="card-text">–≤–∞—à–∏—Ö –ø–æ–¥–±–æ—Ä–æ–∫</p>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–µ–≥–æ–¥–Ω—è</h5>
            </div>
            <div class="card-body">
                <ul class="list-group">
                    {% for stat in mood_stats %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ stat.mood }}
                        <span class="badge bg-primary rounded-pill">{{ stat.count }}</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ—á–∏—Ç–∞—Ç—å</h5>
            </div>
            <div class="card-body">
                {% for book in featured_books %}
                <div class="card mb-2">
                    <div class="card-body">
                        <h6 class="card-title">{{ book.title }}</h6>
                        <p class="card-text small">{{ book.author }}</p>
                        <span class="badge bg-info mood-badge">{{ book.get_mood_display }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}