{% extends 'base.html' %}

{% block title %}üîç –ü–æ–∏—Å–∫ –∫–Ω–∏–≥{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">üîç –ü–æ–∏—Å–∫ –∫–Ω–∏–≥</h1>
    
    <!-- –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ -->
    <form method="get" action="/search/" class="mb-4">
        <div class="input-group">
            <input type="text" 
                   name="q" 
                   value="{{ query }}" 
                   class="form-control" 
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏, –∞–≤—Ç–æ—Ä–∞ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ..."
                   required
                   autofocus>
            <button type="submit" class="btn btn-primary">–ù–∞–π—Ç–∏</button>
        </div>
        <div class="form-text mt-2">
            üí° –ü–æ–∏—Å–∫ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞. "–î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π" = "–¥–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π" = "–î–û–°–¢–û–ï–í–°–ö–ò–ô"
        </div>
    </form>
    
    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
    {% if query %}
        <div class="mt-4">
            <h3>
                –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è "{{ query }}"
                {% if results %}
                <span class="badge bg-secondary">{{ results|length }}</span>
                {% endif %}
            </h3>
            
            {% if results %}
                <div class="row mt-3">
                    {% for book in results %}
                    <div class="col-md-6 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">{{ book.title }}</h5>
                                <p class="card-text">
                                    <strong>–ê–≤—Ç–æ—Ä:</strong> {{ book.author }}<br>
                                    <strong>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ:</strong> 
                                    <span class="badge 
                                        {% if book.mood == 'happy' %}bg-success
                                        {% elif book.mood == 'sad' %}bg-secondary
                                        {% elif book.mood == 'inspiring' %}bg-info
                                        {% elif book.mood == 'calm' %}bg-primary
                                        {% elif book.mood == 'adventurous' %}bg-warning
                                        {% elif book.mood == 'romantic' %}bg-danger
                                        {% elif book.mood == 'mysterious' %}bg-dark
                                        {% else %}bg-light text-dark{% endif %}">
                                        {% if book.mood == 'happy' %}üòä –í–µ—Å–µ–ª–æ–µ
                                        {% elif book.mood == 'sad' %}üòî –ì—Ä—É—Å—Ç–Ω–æ–µ
                                        {% elif book.mood == 'inspiring' %}‚ú® –í–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–µ–µ
                                        {% elif book.mood == 'calm' %}üòå –°–ø–æ–∫–æ–π–Ω–æ–µ
                                        {% elif book.mood == 'adventurous' %}üèûÔ∏è –ü—Ä–∏–∫–ª—é—á–µ–Ω—á–µ—Å–∫–æ–µ
                                        {% elif book.mood == 'romantic' %}‚ù§Ô∏è –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ
                                        {% elif book.mood == 'mysterious' %}üïµÔ∏è –¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ
                                        {% elif book.mood == 'thoughtful' %}ü§î –ó–∞–¥—É–º—á–∏–≤–æ–µ
                                        {% endif %}
                                    </span>
                                </p>
                                
                                {% if book.description %}
                                <p class="card-text small text-muted">
                                    {{ book.description|truncatechars:150 }}
                                </p>
                                {% endif %}
                                
                                {% if book.complexity %}
                                <p class="card-text">
                                    <strong>–°–ª–æ–∂–Ω–æ—Å—Ç—å:</strong> 
                                    <span class="badge {% if book.complexity == 'easy' %}bg-success
                                                       {% elif book.complexity == 'medium' %}bg-warning
                                                       {% else %}bg-danger{% endif %}">
                                        {% if book.complexity == 'easy' %}ü§ì –õ–µ–≥–∫–∞—è
                                        {% elif book.complexity == 'medium' %}üßê –°—Ä–µ–¥–Ω—è—è
                                        {% elif book.complexity == 'hard' %}ü§Ø –°–ª–æ–∂–Ω–∞—è
                                        {% endif %}
                                    </span>
                                </p>
                                {% endif %}
                                
                                <a href="/book/{{ book.id }}/" class="btn btn-sm btn-outline-primary">
                                    –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="alert alert-info mt-3">
                    <h5>üìö –ö–Ω–∏–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h5>
                    <p>–ü–æ –∑–∞–ø—Ä–æ—Å—É "<strong>{{ query }}</strong>" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
                    
                    <h6>üí° –ß—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å:</h6>
                    <ul>
                        <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è</li>
                        <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å —Å–ª–æ–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—Ä–æ–º–∞–Ω" –≤–º–µ—Å—Ç–æ "—Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π")</li>
                        <li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ –∞–≤—Ç–æ—Ä—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é</li>
                        <li>–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ <a href="/books/">–≤—Å–µ –∫–Ω–∏–≥–∏</a></li>
                    </ul>
                    
                    <div class="mt-3">
                        <a href="/search/?q=–¥–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π" class="btn btn-sm btn-outline-secondary">–¥–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π</a>
                        <a href="/search/?q=—Ä–æ–º–∞–Ω" class="btn btn-sm btn-outline-secondary">—Ä–æ–º–∞–Ω</a>
                        <a href="/search/?q=–¥–µ—Ç–µ–∫—Ç–∏–≤" class="btn btn-sm btn-outline-secondary">–¥–µ—Ç–µ–∫—Ç–∏–≤</a>
                        <a href="/search/?q=—Ñ—ç–Ω—Ç–µ–∑–∏" class="btn btn-sm btn-outline-secondary">—Ñ—ç–Ω—Ç–µ–∑–∏</a>
                    </div>
                </div>
            {% endif %}
        </div>
    {% else %}
        <!-- –°–æ–≤–µ—Ç—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞—Ö–æ–¥–µ -->
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">üí° –ö–∞–∫ –∏—Å–∫–∞—Ç—å –∫–Ω–∏–≥–∏?</h5>
                <div class="row mt-3">
                    <div class="col-md-4">
                        <div class="text-center">
                            <div class="display-4">üî§</div>
                            <h6>–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</h6>
                            <p class="small text-muted">"–í–æ–π–Ω–∞ –∏ –º–∏—Ä", "–ú–∞—Å—Ç–µ—Ä –∏ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞"</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="text-center">
                            <div class="display-4">üë§</div>
                            <h6>–ü–æ –∞–≤—Ç–æ—Ä—É</h6>
                            <p class="small text-muted">"–î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π", "–¢–æ–ª—Å—Ç–æ–π", "–ü—É—à–∫–∏–Ω"</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="text-center">
                            <div class="display-4">üìñ</div>
                            <h6>–ü–æ –æ–ø–∏—Å–∞–Ω–∏—é</h6>
                            <p class="small text-muted">"–ª—é–±–æ–≤—å", "–ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è", "–¥–µ—Ç–µ–∫—Ç–∏–≤"</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4">
                    <h6>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∏—Å–∫–∞:</h6>
                    <p class="text-muted mb-0">
                        –í—Å–µ–≥–æ –∫–Ω–∏–≥ –≤ —Å–∏—Å—Ç–µ–º–µ: <strong>{{ Book.objects.count }}</strong><br>
                        –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º, –≤ –ª—é–±–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ.
                    </p>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}